<form novalidate [formGroup]="form" (ngSubmit)="f.form.valid" #f="ngForm">
  <md-card>

    <md-toolbar (click)="toggleForm()" *ngIf="!showForm" class="pointer">
      <span class="section-title">{{slideIndex}} - {{slide.pageTitle.title}}</span>
    </md-toolbar>
    <md-toolbar class="title-bar" *ngIf="showForm">
      <span class="section-title"> {{slideIndex}} -
        <md-input-container>
          <input mdInput formControlName="pageTitle" name="pageTitle" />
        </md-input-container>
        <md-select formControlName="titleAlign" name="titleAlign">
          <md-option *ngFor="let align of titleAlign" [value]="align">
            {{ align }}
          </md-option>
        </md-select>
      </span>
      <div (click)="toggleForm()" class="click"></div>
    </md-toolbar>

    <md-card-content *ngIf="showForm">
      <div fxLayout="row" fxLayoutWrap="wrap" fxLayoutAlign="space-around" class="base dark layout-selector">
        <div *ngFor="let layout of pageLayout">
          <input type="radio" [attr.id]="layout.value" name="layout-selector" (change)="pageLayoutChange(layout.value)" [attr.checked]="layout.value==slide.pageLayout?true:null" />
          <label for={{layout.value}}><a md-raised-button mdTooltip={{layout.type}}><i class="fa {{layout.icon}} fa-fw"></i></a></label>
        </div>
      </div>
      <div fxLayout="row" fxLayoutWrap="wrap" fxLayoutAlign="space-around" class="base dark">
        <!--  <md-select placeholder="Page layout" formControlName="pageLayout" name="pageLayout" (change)="pageLayoutChange()" fxFlex="50">
          <md-option *ngFor="let layout of pageLayout" [value]="layout.value">
            {{ layout.type }}
          </md-option>
        </md-select>-->
        <md-select *ngIf="slide.hasGraph&&slide.pageLayout.value!='textInCenterImageBackground'" placeholder="Select graph" formControlName="slideGraph" name="slideGraph" (change)="graphChanged()" fxFlex="50">
          <md-option *ngFor="let graph of graphs" [value]="graph.value">
            {{ graph.type }}
          </md-option>
        </md-select>
      </div>


      <div fxLayout="row" fxLayoutWrap="wrap" fxLayoutAlign="space-around" class="base dark">

        <!-- <md-tab-group *ngIf="slide.hasGraph &&(form.controls.slideGraph.value)&& !(form.controls.slideGraph.value=='image'||form.controls.slideGraph.value=='noGraph'||form.controls.slideGraph.value=='ngGraph')" [selectedIndex]="curTab" #dataInput fxFlex="100">
        <md-tab label="Json">
          <textarea name="graphDataJson" formControlName="graphDataJson"></textarea>
          <p class="error" *ngIf=" form.controls.graphDataJson.invalid">Invalidate json format</p>
        </md-tab>
        <md-tab label="CSV">
          <app-csv-input (csv2json)="getCsvJson($event)"></app-csv-input>
        </md-tab>
      </md-tab-group> -->

        <app-image-upload (setImage)="setImageHtml($event)" [imagePath]="slide.slideImage" *ngIf="(slide.hasGraph&&form.controls.slideGraph.value=='image')||(this.form.value.pageLayout=='textInCenterImageBackground')" fxFlex="100"></app-image-upload>

        <textarea [froalaEditor]='editorOptions' [(froalaModel)]="slide.text" fxFlex="100"></textarea>

        <div *ngIf="form.controls.slideGraph.value == 'ngGraph'" fxFlex="100">
          <app-charts-builder [inputData]="slide.data" [inputOptions]="slide.config" (configGraph)="confirmeSlideGRaphConfig($event)">
          </app-charts-builder>
        </div>
      </div>


      <div class="base dark" fxLayout="row" fxLayoutAlign="center center">
        <button md-raised-button type="button" (click)="confirmSlide()" [disabled]="!form.valid||isInShuffle">OK</button>
        <button md-raised-button type="button" (click)="deleteSlide($event)" [disabled]="isInShuffle" color="warn">DELETE</button>
        <span class="error" *ngIf="isInShuffle"> Modification and delete are not allowed during shuffling </span>
      </div>

    </md-card-content>

  </md-card>
</form>
